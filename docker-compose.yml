version: '3.8'
services:
  api:
    container_name: slate_api_server
    image: slate_api_server:local
    env_file:
      - ./resources/docker/env/Debug.env
    command: '/slate/resources/docker/scripts/build-start.sh'
    depends_on:
      - db
    build:
      context: .
      dockerfile: ./resources/docker/Debug.dockerfile
    ports:
      - "18080:18080"
    volumes:
      - ./:/slate
    networks:
      - slateNetwork

  db:
    container_name: slate_database
    image: dwmkerr/dynamodb:latest
    restart: always
    networks:
      - slateNetwork

  testbench:
    container_name: slate_testbench
    image: slate_testbench:local
    env_file:
      - ./resources/docker/env/Debug.env
    build:
      context: .
      dockerfile: ./resources/docker/Testbench.dockerfile
    volumes:
      - ./work:/work
    networks:
      - slateNetwork
    tty: true

networks:
  slateNetwork:
